(this["webpackJsonpreact-todolist"]=this["webpackJsonpreact-todolist"]||[]).push([[0],{105:function(t,e,a){t.exports={rememberMe:"Login_rememberMe__3xNMV",button:"Login_button__vDBYk"}},131:function(t,e,a){t.exports={alert:"ErrorSnackbar_alert__1zk2G"}},157:function(t,e,a){},158:function(t,e,a){},185:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),s=a(20),o=a.n(s);a(157),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(158);var c,r,d=a(16),l=a(275),u=a(258),j=a(259),b=a(2),f=i.a.memo((function(t){var e=Object(n.useState)(""),a=Object(d.a)(e,2),i=a[0],s=a[1],o=Object(n.useState)(!1),c=Object(d.a)(o,2),r=c[0],f=c[1],h=function(){var e=i.trim();e?t.addItem(e):f(!0),s("")};return Object(b.jsxs)("div",{children:[Object(b.jsx)(l.a,{style:{width:"180px"},size:"small",variant:"outlined",value:i,onChange:function(t){s(t.currentTarget.value),f(!1)},onKeyPress:function(t){"Enter"===t.key&&h()},label:"Title",error:r,helperText:r&&"title is required!",disabled:"loading"===t.entityStatus}),Object(b.jsx)(u.a,{onClick:h,color:"primary",size:"small",disabled:"loading"===t.entityStatus,children:Object(b.jsx)(j.a,{fontSize:"large"})})]})})),h=function(t){var e=Object(n.useState)(!1),a=Object(d.a)(e,2),i=a[0],s=a[1],o=Object(n.useState)(t.title),c=Object(d.a)(o,2),r=c[0],u=c[1];return i?Object(b.jsx)(l.a,{style:{width:"130px"},value:r,onBlur:function(){s(!1),t.setNewTitle(r)},autoFocus:!0,onChange:function(t){u(t.currentTarget.value)}}):Object(b.jsx)("span",{onDoubleClick:function(){return s(!0)},children:t.title})},p=a(262),O=a(257),m=a(263),g=a(187),x=a(261),v=a(260),k=a(279),y=a(129),C=a.n(y).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"419c229b-43d4-438c-9dc1-973ee316752b"}}),T=function(){return C.get("todo-lists")},I=function(t){return C.post("todo-lists",{title:t})},w=function(t){return C.delete("todo-lists/".concat(t))},A=function(t){return C.put("todo-lists/".concat(t.todolistId),{title:t.title})},S=function(t){return C.get("todo-lists/".concat(t,"/tasks"))},L=function(t){return C.post("todo-lists/".concat(t.todolistId,"/tasks"),{title:t.title})},E=function(t,e){return C.delete("todo-lists/".concat(t,"/tasks/").concat(e))},N=function(t,e,a){return C.put("todo-lists/".concat(t,"/tasks/").concat(e),a)},z=function(t){return C.post("auth/login",t)},F=function(){return C.get("/auth/me")},M=function(){return C.delete("auth/login")};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(c||(c={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.High=2]="High",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(r||(r={}));var P=i.a.memo((function(t){return Object(b.jsxs)(v.a,{disableGutters:!0,className:t.task.status===c.Completed?"is-Done":"",divider:!0,style:{display:"flex",justifyContent:"space-between",padding:"0px"},children:[Object(b.jsx)(k.a,{color:"primary",onChange:function(e){t.changeTaskStatus(t.task.id,e.currentTarget.checked?c.Completed:c.New,t.todolistId)},checked:t.task.status===c.Completed}),Object(b.jsx)(h,{title:t.task.title,setNewTitle:function(e){t.changeTaskTitle(t.task.id,e,t.todolistId)}}),Object(b.jsx)(u.a,{onClick:function(){return t.removeTask(t.task.id,t.todolistId)},children:Object(b.jsx)(x.a,{fontSize:"small"})})]},t.task.id)})),_=a(34),D=function(t,e){t(K({error:e})),t(J({status:"failed"}))},R=function(t,e){t(J({status:"failed"})),e.messages.length?t(K({error:e.messages[0]})):t(K({error:"Some error occurred"}))},B=a(46),q=Object(B.b)({name:"auth",initialState:{isLoggedIn:!1},reducers:{setIsLoggedInAC:function(t,e){t.isLoggedIn=e.payload.value}}}),H=q.reducer,U=q.actions.setIsLoggedInAC,W=Object(B.b)({name:"app",initialState:{status:"succeeded",error:null,isInitialized:!1},reducers:{setAppErrorAC:function(t,e){t.error=e.payload.error},setAppStatusAC:function(t,e){t.status=e.payload.status},setIsInitializedAC:function(t,e){t.isInitialized=e.payload.isInitialized}}}),Z=W.reducer,G=W.actions,J=G.setAppStatusAC,K=G.setAppErrorAC,V=G.setIsInitializedAC,Y=Object(B.b)({name:"todolists",initialState:[],reducers:{removeTodoListAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.id}));a>-1&&t.splice(a,1)},addTodoListAC:function(t,e){t.unshift(Object(_.a)(Object(_.a)({},e.payload.todolist),{},{filter:"all",entityStatus:"idle"}))},changeTodoListAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.id}));t[a].title=e.payload.title},changeTodoListFilterAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.id}));t[a].filter=e.payload.filter},setTodosAC:function(t,e){return e.payload.todolists.map((function(t){return Object(_.a)(Object(_.a)({},t),{},{filter:"all",entityStatus:"idle"})}))},changeTodoListEntityStatusAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.id}));t[a].entityStatus=e.payload.entityStatus}}}),$=Y.reducer,Q=Y.actions,X=Q.removeTodoListAC,tt=Q.addTodoListAC,et=Q.changeTodoListAC,at=Q.changeTodoListFilterAC,nt=Q.setTodosAC,it=Q.changeTodoListEntityStatusAC,st=Object(B.b)({name:"tasks",initialState:{},reducers:{removeTaskAC:function(t,e){var a=t[e.payload.todolistId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));n>-1&&a.splice(n,1)},addTaskAC:function(t,e){t[e.payload.task.todoListId].unshift(e.payload.task)},updateTaskAC:function(t,e){var a=t[e.payload.todolistId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));n>-1&&(a[n]=Object(_.a)(Object(_.a)({},a[n]),e.payload.domainModel))},setTasksAC:function(t,e){t[e.payload.todoId]=e.payload.tasks}},extraReducers:function(t){t.addCase(tt,(function(t,e){t[e.payload.todolist.id]=[]})),t.addCase(X,(function(t,e){delete t[e.payload.id]})),t.addCase(nt,(function(t,e){e.payload.todolists.forEach((function(e){t[e.id]=[]}))}))}}),ot=st.reducer,ct=st.actions,rt=ct.removeTaskAC,dt=ct.addTaskAC,lt=ct.updateTaskAC,ut=ct.setTasksAC,jt=function(t,e,a){return function(n,i){var s=i().tasks[t].find((function(t){return t.id===e}));if(s){var o=Object(_.a)({title:s.title,status:s.status,deadline:s.deadline,description:s.description,priority:s.priority,startDate:s.startDate},a);N(t,e,o).then((function(i){0===i.data.resultCode&&n(lt({taskId:e,domainModel:a,todolistId:t}))}))}}},bt=a(26),ft=i.a.memo((function(t){var e=Object(bt.b)();Object(n.useEffect)((function(){var a;e((a=t.id,function(t){t(J({status:"loading"})),S(a).then((function(e){t(J({status:"succeeded"}));var n=e.data.items;t(ut({tasks:n,todoId:a}))}))}))}),[]);var a=t.tasks;"active"===t.filter&&(a=a.filter((function(t){return t.status===c.New}))),"completed"===t.filter&&(a=a.filter((function(t){return t.status===c.Completed})));var i=a.map((function(e){return Object(b.jsx)(P,{todolistId:t.id,task:e,removeTask:t.removeTask,changeTaskStatus:t.changeTaskStatus,changeTaskTitle:t.changeTaskTitle},e.id)})),s=Object(n.useCallback)((function(e){t.addTask(e,t.id)}),[t.addTask,t.id]),o=Object(n.useCallback)((function(){return t.changeFilter("all",t.id)}),[t.id]),r=Object(n.useCallback)((function(){return t.changeFilter("active",t.id)}),[t.id]),d=Object(n.useCallback)((function(){return t.changeFilter("completed",t.id)}),[t.id]);return Object(b.jsxs)("div",{className:"todoList",children:[Object(b.jsxs)(p.a,{variant:"h6",align:"center",style:{fontWeight:"bold"},children:[Object(b.jsx)(h,{title:t.title,setNewTitle:function(e){t.changeTodolistTitle(e,t.id)}}),Object(b.jsx)(u.a,{onClick:function(){return t.removeTodolist(t.id)},disabled:"loading"===t.entityStatus,children:Object(b.jsx)(x.a,{})})]}),Object(b.jsx)(f,{addItem:s,entityStatus:t.entityStatus}),Object(b.jsx)(O.a,{children:i}),Object(b.jsx)("div",{children:Object(b.jsxs)(m.a,{variant:"contained",size:"small",children:[Object(b.jsx)(g.a,{color:"all"===t.filter?"secondary":"primary",onClick:o,children:"All"}),Object(b.jsx)(g.a,{color:"active"===t.filter?"secondary":"primary",onClick:r,children:"Active"}),Object(b.jsx)(g.a,{color:"completed"===t.filter?"secondary":"primary",onClick:d,children:"Completed"})]})})]})})),ht=a(269),pt=a(186),Ot=a(270),mt=a(271),gt=a(273),xt=a(272),vt=a(287),kt=a(280),yt=a(276),Ct=a(131),Tt=a.n(Ct),It=i.a.forwardRef((function(t,e){return Object(b.jsx)(yt.a,Object(_.a)({elevation:6,ref:e,variant:"filled"},t))}));function wt(){var t=Object(bt.c)((function(t){return t.app.error})),e=Object(bt.b)(),a=function(t,a){"clickaway"!==a&&e(K({error:null}))};return Object(b.jsx)(kt.a,{open:null!==t,autoHideDuration:1e4,onClose:a,children:Object(b.jsx)(It,{onClose:a,severity:"error",color:"error",sx:{width:"100%"},className:Tt.a.alert,children:t})})}var At=a(284),St=a(277),Lt=a(281),Et=a(282),Nt=a(288),zt=a(267),Ft=a(274),Mt=a(289),Pt=a(136),_t=a(18),Dt=a(105),Rt=a.n(Dt),Bt=function(){var t=Object(bt.b)(),e=Object(bt.c)((function(t){return t.auth.isLoggedIn})),a=Object(Pt.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Required",t.password?t.password.length<3&&(e.password="Password length must be 3 or longer"):e.password="Required",e},onSubmit:function(e){var n;t((n=e,function(t){t(J({status:"loading"})),z(n).then((function(e){0===e.data.resultCode?(t(J({status:"succeeded"})),t(U({value:!0}))):R(t,e.data)})).catch((function(e){D(t,e.message)}))})),a.resetForm()}});return e?Object(b.jsx)(_t.a,{to:"/"}):Object(b.jsx)(At.a,{container:!0,justifyContent:"center",children:Object(b.jsx)(At.a,{item:!0,justifyContent:"center",children:Object(b.jsxs)(Lt.a,{children:[Object(b.jsxs)(zt.a,{children:[Object(b.jsxs)("p",{children:["To log in get registered",Object(b.jsx)("a",{href:"https://social-network.samuraijs.com/",target:"blank",children:" here"})]}),Object(b.jsx)("p",{children:"or use common test account credentials:"}),Object(b.jsx)("p",{children:"Email: free@samuraijs.com"}),Object(b.jsx)("p",{children:"Password: free"})]}),Object(b.jsx)("form",{onSubmit:a.handleSubmit,children:Object(b.jsxs)(Nt.a,{children:[Object(b.jsx)(Ft.a,Object(_.a)({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.touched.email&&a.errors.email&&Object(b.jsx)("div",{style:{color:"red"},children:a.errors.email}),Object(b.jsx)(Ft.a,Object(_.a)({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.touched.password&&a.errors.password&&Object(b.jsx)("div",{style:{color:"red"},children:a.errors.password}),Object(b.jsx)(Et.a,{label:"Remember me",className:Rt.a.rememberMe,control:Object(b.jsx)(St.a,Object(_.a)({},a.getFieldProps("rememberMe")))}),Object(b.jsx)(Mt.a,{type:"submit",variant:"contained",color:"primary",className:Rt.a.button,children:"Login"})]})})]})})})},qt=a(286);var Ht=function(t){return Object(bt.c)((function(t){return t.auth.isLoggedIn}))?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(ht.a,{container:!0,style:{padding:"29px 0px"},children:Object(b.jsx)(f,{addItem:t.addTodolist})}),Object(b.jsx)(ht.a,{container:!0,spacing:4,children:t.todolistsComponents})]}):Object(b.jsx)(_t.a,{to:"login"})},Ut=function(){Object(n.useEffect)((function(){o((function(t){F().then((function(e){0===e.data.resultCode&&t(U({value:!0}))})).finally((function(){t(V({isInitialized:!0}))}))}))}),[]);var t=Object(bt.c)((function(t){return t.auth.isLoggedIn})),e=Object(bt.c)((function(t){return t.app.isInitialized})),a=Object(bt.c)((function(t){return t.todolists})),i=Object(bt.c)((function(t){return t.app.status})),s=Object(bt.c)((function(t){return t.tasks})),o=Object(bt.b)();Object(n.useEffect)((function(){t&&o((function(t,e){t(J({status:"loading"})),T().then((function(e){t(J({status:"succeeded"}));var a=e.data;t(nt({todolists:a}))}))}))}),[t]);var c=Object(n.useCallback)((function(t,e){var a,n,i=(a=t,n=e,function(t){t(J({status:"loading"})),E(n,a).then((function(e){t(J({status:"succeeded"})),0===e.data.resultCode&&t(rt({taskId:a,todolistId:n}))}))});o(i)}),[o]),r=Object(n.useCallback)((function(t,e){o(function(t,e){return function(a){a(J({status:"loading"})),L({title:t,todolistId:e}).then((function(t){0===t.data.resultCode?(a(J({status:"succeeded"})),a(dt({task:t.data.data.item}))):R(a,t.data)})).catch((function(t){D(a,t.message)}))}}(t,e))}),[o]),d=Object(n.useCallback)((function(t,e,a){o(jt(a,t,{status:e}))}),[o]),l=Object(n.useCallback)((function(t,e,a){var n=jt(a,t,{title:e});o(n)}),[o]),j=Object(n.useCallback)((function(t,e){var a=at({id:e,filter:t});o(a)}),[o]),f=Object(n.useCallback)((function(t,e){var a=function(t,e){return function(a){A({todolistId:t,title:e}).then((function(n){a(et({id:t,title:e}))}))}}(e,t);o(a)}),[o]),h=Object(n.useCallback)((function(t){var e,a=(e=t,function(t){t(J({status:"loading"})),t(it({id:e,entityStatus:"loading"})),w(e).then((function(a){0===a.data.resultCode?(t(J({status:"succeeded"})),t(X({id:e}))):(t(J({status:"failed"})),a.data.messages.length?t(K({error:a.data.messages[0]})):t(K({error:"Some error occurred"})))}))});o(a)}),[o]),O=Object(n.useCallback)((function(t){var e=function(t){return function(e,a){e(J({status:"loading"})),I(t).then((function(t){0===t.data.resultCode?(e(J({status:"succeeded"})),e(tt({todolist:t.data.data.item}))):R(e,t.data)})).catch((function(t){D(e,t.message)}))}}(t);o(e)}),[o]);if(!e)return Object(b.jsx)("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"},children:Object(b.jsx)(qt.a,{})});var m=a.map((function(t){return Object(b.jsx)(ht.a,{item:!0,children:Object(b.jsx)(pt.a,{elevation:8,style:{padding:"20px"},children:Object(b.jsx)(ft,{id:t.id,title:t.title,filter:t.filter,entityStatus:t.entityStatus,tasks:s[t.id],removeTask:c,changeFilter:j,addTask:r,changeTaskStatus:d,removeTodolist:h,changeTaskTitle:l,changeTodolistTitle:f})})},t.id)}));return Object(b.jsx)("div",{children:Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(Ot.a,{position:"static",children:Object(b.jsxs)(mt.a,{style:{justifyContent:"space-between"},children:[Object(b.jsx)(u.a,{edge:"start",color:"inherit","aria-label":"menu",style:{width:"106px"},children:Object(b.jsx)(xt.a,{})}),Object(b.jsx)(p.a,{variant:"h6",children:"Todolists"}),t&&Object(b.jsx)(g.a,{color:"inherit",variant:"outlined",onClick:function(){o((function(t){t(J({status:"loading"})),M().then((function(e){0===e.data.resultCode?(t(J({status:"succeeded"})),t(U({value:!1}))):R(t,e.data)})).catch((function(e){D(t,e.message)}))}))},children:"Logout"}),!t&&Object(b.jsx)("div",{style:{width:"94px"}})]})}),"loading"===i&&Object(b.jsx)(vt.a,{color:"secondary"}),Object(b.jsx)(gt.a,{fixed:!0,children:Object(b.jsxs)(_t.d,{children:[Object(b.jsx)(_t.b,{path:"/",element:Object(b.jsx)(Ht,{addTodolist:O,todolistsComponents:m})}),Object(b.jsx)(_t.b,{path:"login",element:Object(b.jsx)(Bt,{})}),Object(b.jsx)(_t.b,{path:"404",element:Object(b.jsx)("h1",{style:{textAlign:"center"},children:"404 page not found"})}),Object(b.jsx)(_t.b,{path:"*",element:Object(b.jsx)(_t.a,{to:"404"})})]})}),Object(b.jsx)(wt,{})]})})},Wt=a(135),Zt=a(78),Gt=Object(Wt.a)({tasks:ot,todolists:$,app:Z,auth:H}),Jt=Object(B.a)({reducer:Gt,middleware:function(t){return t().prepend(Zt.a)}});bt.c;window.store=Jt;var Kt=a(83);o.a.render(Object(b.jsx)(bt.a,{store:Jt,children:Object(b.jsx)(Kt.a,{children:Object(b.jsx)(Ut,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[185,1,2]]]);
//# sourceMappingURL=main.d4e9cabf.chunk.js.map